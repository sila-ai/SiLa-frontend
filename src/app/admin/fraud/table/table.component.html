<!-- <div class="fraudtable_block">
  <nb-card class="custom-card">
    <nb-card-header>
      <div class="row">
        <div class="col-sm-7">
          <h2 class="title">Click Log</h2>
        </div>
      </div>
      <br /><br />
      <div class="row">
        <div class="col-sm-12 custome_table">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <th
                  class="bordered"
                  id="clickDate"
                  (click)="selectColumn('clickDate')"
                >
                  Click Date
                </th>
                <th
                  class="bordered"
                  id="clickTime"
                  (click)="selectColumn('clickTime')"
                >
                  Click Time
                </th>
                <th class="bordered" id="ip" (click)="selectColumn('ip')">
                  Ip
                </th>
                <th class="bordered" id="os" (click)="selectColumn('os')">
                  OS
                </th>
                <th
                  class="bordered"
                  id="deviceType"
                  (click)="selectColumn('deviceType')"
                >
                  Device type
                </th>
                <th class="bordered" id="city" (click)="selectColumn('city')">
                  City
                </th>
                <th
                  class="bordered"
                  id="browser"
                  (click)="selectColumn('browser')"
                >
                  Browser
                </th>
                <th class="bordered" id="isp" (click)="selectColumn('isp')">
                  ISP
                </th>
                <th class="bordered" id="farm" (click)="selectColumn('farm')">
                  Farm
                </th>
              </thead>
            </table>
          </div>
        </div>
      </div>
    </nb-card-header>
  </nb-card>
  <nb-card class="custom-card">
    <nb-card-body>
      <div class="custom_table">
        <div class="table-responsive">
          <table class="table">
            <thead class="thead-dark">
              <tr>
                <th *ngIf="selectedColumn == 'clickDate'">
                  Click Date
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    [(ngModel)]="searchName"
                    placeholder="Search"
                  />
                </th>

                <th *ngIf="selectedColumn == 'clickTime'">
                  Click Time
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>

                <th>
                  Campaign ID
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>
                <th>
                  Keyword
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>
                <th>
                  Country
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>
                <th>
                  IVT
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>
                <th>
                  Blocked
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>

                <th *ngFor="let column of selectedColumns">
                  {{ column }}
                  <input
                    type="text"
                    nbinput
                    class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"
                    (keyup)="onSearch($event)"
                    placeholder="Search"
                  />
                </th>
                <th *ngIf="selectedColumn === 'ip' ">Ip
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'os' ">OS
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'deviceType' ">Device type
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'city' ">City
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'browser' ">Browser
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'isp' ">ISP
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20" [(ngModel)]="searchName" placeholder="Search">
                </th>
                <th *ngIf="selectedColumn === 'farm' ">Farm
                  <input type="text" nbinput class="search-input size-medium status-basic shape-rectangle nb-transition mt-20"  (keyup)="onSearch($event)" placeholder="Search">
                </th>

              </tr>
            </thead>
            <tbody>
              | paginate: { itemsPerPage: 4, currentPage: page }
              <tr
                *ngFor="
                  let i = index;
                  let log;
                  of: userLog | filterAll: searchName
                "
              >
                <td *ngIf="selectedColumn == 'clickDate'">
                  {{ log.clickTime | date: "mediumDate" }}
                </td>
                <td *ngIf="selectedColumn == 'clickTime'">
                  {{ log.clickTime | date: "shortTime" }}
                </td>

                <td>{{ log.campaignid }}</td>
                <td>{{ log.keyword }}</td>
                <td
                  (mouseover)="showImage(true, i)"
                  (mouseout)="showImage(false, i)"
                >
                  <div class="country-group">
                    <img src="./assets/img/Ellipse_214.png" alt="" />
                    <span id="countryName {{ i }}" style="display: none">
                      {{ log.country }}
                    </span>
                  </div>
                </td>
                <td>
                  {{ log.bot }} &nbsp; {{ log.jsEnabled }} &nbsp;
                  {{ log.vpn }}
                </td>

                <td>
                  <span class="text-danger" *ngIf="log.block">
                    <img
                      style="width: 28px; height: 28px; margin-left: 10px"
                      src="./assets/img/success-icon.png"
                      alt=""
                    />
                  </span>
                  <span class="text-success" *ngIf="!log.block">
                    <img
                      style="width: 28px; height: 28px; margin-left: 10px"
                      src="./assets/img/cancel-icon.png"
                      alt=""
                    />
                  </span>
                </td>

                <td *ngFor="let column of selectedColumns">
                  {{ log.column }}
                </td>

                <td *ngIf="selectedColumns.find(x=>x === 'ip')">
                  {{log.ip}}
                </td>
                <td *ngIf="selectedColumn === 'os' ">
                  {{log.os}}
                </td>
                <td *ngIf="selectedColumn === 'deviceType' ">
                  {{log.device}}
                </td>
                <td *ngIf="selectedColumn === 'city' ">
                  {{log.city}}
                </td>
                <td *ngIf="selectedColumn === 'browser' ">
                  {{log.browser}}
                </td>
                <td *ngIf="selectedColumn === 'isp' ">
                  {{log.isp}}
                </td>
                <td *ngIf="selectedColumn === 'farm' ">
                  {{log.farm}}
                </td>
                <td>{{ log.ip }}</td>

                <td>{{ log.clickTime | date:'shortTime'}}</td>
                <td>{{ log.os }}</td>

                <td>{{ log.proxy }}</td>
                <td>{{ log.city }}</td>
                <td></td>
                <td>{{ log.browser }}</td>
                <td>{{ log.isp }}</td>
                <td>{{ log.bot }}</td>
                <td>
                  <nb-checkbox
                    [checked]="log.farm ? 'true' : 'false'"
                  ></nb-checkbox>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <pagination-controls (pageChange)="page = $event"></pagination-controls>
            </tfoot>
          </table>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="flex-btn">
            <button
              nbButton
              status="primary"
              class="btn_submit"
              (click)="downloadCsv()"
            >
              <img src="./assets/img/Icon_feather-download.svg" />
              Download
            </button>
          </div>
        </div>
      </div>
    </nb-card-body>
    <nb-card-foot>

    </nb-card-foot>
  </nb-card>
</div> -->

<div class="container-fluid">
  <div class="page_block">
    <div class="page-title">
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <h2 class="title_block">Click Log</h2>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <mat-card>
        <div class="row align-items-baseline">
          <div class="col-sm-3 col-xs-6">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>First campaign</mat-label>
              <mat-date-range-input
                [formGroup]="campaignOne"
                [rangePicker]="campaignOnePicker"
              >
                <input
                  matStartDate
                  placeholder="Start date"
                  formControlName="start"
                  (dateChange)="dateStartEvent($event)"
                />
                <input
                  matEndDate
                  placeholder="End date"
                  formControlName="end"
                  (dateChange)="dateEndEvent($event)"
                />
              </mat-date-range-input>
              <mat-datepicker-toggle
                matSuffix
                [for]="campaignOnePicker"
              ></mat-datepicker-toggle>
              <mat-date-range-picker #campaignOnePicker></mat-date-range-picker>
            </mat-form-field>
          </div>
          <!-- <div class="col-3">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Choose a date</mat-label>
              <input matInput [matDatepicker]="picker" />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
          </div> -->
          <div class="col-sm-3 col-xs-6">
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Group By</mat-label>
              <mat-select multiple [(ngModel)]="selectedHeaders">
                <mat-option
                  *ngFor="let param of searchBy"
                  (click)="changeHeader()"
                  [value]="param"
                >
                  {{ param }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12 test-container">
      <ag-grid-angular
        style="width: 100%; height: 60vh"
        class="ag-theme-alpine"
        [rowData]="userLog"
        [defaultColDef]="defaultColDef"
        (gridReady)="onGridReady($event)"
        [columnDefs]="columnDefs"
        [gridOptions]="{ pagination: true }"
        [tooltipShowDelay]="tooltipShowDelay"
        [tooltipHideDelay]="tooltipHideDelay"
        [frameworkComponents]="frameworkComponents"
      >
      </ag-grid-angular>
    </div>
  </div>

  <div class="row mt-3 mb-3">
    <div class="col-12">
      <button
        mat-raised-button
        (click)="downloadCsv()"
        class="btn-raised float-right"
      >
        <span class="material-icons"> download </span> Download
      </button>
    </div>
  </div>
</div>
